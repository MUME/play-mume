function hookEvent(n,t,e){"string"==typeof n&&(n=document.getElementById(n)),null!=n&&(n.addEventListener?n.addEventListener(t,e,!1):n.attachEvent&&n.attachEvent("on"+t,e))}function unhookEvent(n,t,e){"string"==typeof n&&(n=document.getElementById(n)),null!=n&&(n.removeEventListener?n.removeEventListener(t,e,!1):n.detachEvent&&n.detachEvent("on"+t,e))}function cancelEvent(n){return(n=n||window.event).stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault(),n.cancelBubble=!0,n.cancel=!0,n.returnValue=!1,!1}function Position(n,t){this.X=n,this.Y=t,this.Add=function(n){var t=new Position(this.X,this.Y);return null!=n&&(isNaN(n.X)||(t.X+=n.X),isNaN(n.Y)||(t.Y+=n.Y)),t},this.Subtract=function(n){var t=new Position(this.X,this.Y);return null!=n&&(isNaN(n.X)||(t.X-=n.X),isNaN(n.Y)||(t.Y-=n.Y)),t},this.Min=function(n){var t=new Position(this.X,this.Y);return null==n||(!isNaN(n.X)&&this.X>n.X&&(t.X=n.X),!isNaN(n.Y)&&this.Y>n.Y&&(t.Y=n.Y)),t},this.Max=function(n){var t=new Position(this.X,this.Y);return null==n||(!isNaN(n.X)&&this.X<n.X&&(t.X=n.X),!isNaN(n.Y)&&this.Y<n.Y&&(t.Y=n.Y)),t},this.Bound=function(n,t){return this.Max(n).Min(t)},this.Check=function(){var n=new Position(this.X,this.Y);return isNaN(n.X)&&(n.X=0),isNaN(n.Y)&&(n.Y=0),n},this.Apply=function(n){"string"==typeof n&&(n=document.getElementById(n)),null!=n&&(isNaN(this.X)||(n.style.left=this.X+"px"),isNaN(this.Y)||(n.style.top=this.Y+"px"))}}function absoluteCursorPostion(n){return n=n||window.event,isNaN(window.scrollX)?new Position(n.clientX+document.documentElement.scrollLeft+document.body.scrollLeft,n.clientY+document.documentElement.scrollTop+document.body.scrollTop):new Position(n.clientX+window.scrollX,n.clientY+window.scrollY)}function dragObject(n,t,e,i,o,s,u,l){if("string"==typeof n&&(n=document.getElementById(n)),null!=n){if(null!=e&&null!=i){var r=e.Min(i);i=e.Max(i),e=r}var c=null,a=null,h=!1,d=!1,f=!1;this.Dispose=function(){f||(this.StopListening(!0),n=null,t=null,e=null,i=null,o=null,s=null,u=null,f=!0)},this.StartListening=function(){d||f||(d=!0,hookEvent(t,"mousedown",v))},this.StopListening=function(n){d&&!f&&(unhookEvent(t,"mousedown",v),d=!1,n&&h&&p())},this.IsDragging=function(){return h},this.IsListening=function(){return d},this.IsDisposed=function(){return f},"string"==typeof t&&(t=document.getElementById(t)),null==t&&(t=n),l||this.StartListening()}function v(t){if(!h&&d&&!f)return h=!0,null!=o&&o(t,n),c=absoluteCursorPostion(t),a=(a=new Position(parseInt(n.style.left),parseInt(n.style.top))).Check(),hookEvent(document,"mousemove",m),hookEvent(document,"mouseup",X),cancelEvent(t)}function m(t){if(h&&!f){var o=absoluteCursorPostion(t);return(o=(o=o.Add(a).Subtract(c)).Bound(e,i)).Apply(n),null!=s&&s(o,n),cancelEvent(t)}}function X(n){return p(),cancelEvent(n)}function p(){h&&!f&&(unhookEvent(document,"mousemove",m),unhookEvent(document,"mouseup",X),c=null,a=null,null!=u&&u(n),h=!1)}}